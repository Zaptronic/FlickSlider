function backgroundColorSelector(o){dominantColorCheck=function(){if(colors[o].dominantColor){var r=$(".is-selected img").attr("src");console.log("checkthis: "+r)}},backgroundColorSetter=function(){var r=String("rgb("+colors[o].backgroundColor+")");colors[o].dominantColor?$("body").css("background-color","white"):$("body").css("background-color",r)},this.dominantColorCheck(),this.backgroundColorSetter()}function progressBarMapper(){var o=100/flkty.slides.length;$progressBar.width(o+flkty.selectedIndex*o+"%")}function dominantColorPush(o){var r={dominantColorRGB:o};dominantColorCollection.push(r)}function getContrastYIQ(o,r,l){if((299*o+587*r+114*r)/1e3>=128)return!0}var Flickity=require("flickity"),$=require("jquery"),p5=require("p5"),$progressBar=$(".progress-bar"),elem=document.querySelector(".main-carousel"),flkty=new Flickity(elem,{cellAlign:"left",wrapAround:!0,setGallerySize:!1,dragThreshold:12,pageDots:!1}),colors=[{dominantColor:!0,backgroundColor:[255,220,220]},{dominantColor:!1,backgroundColor:[220,200,255]},{dominantColor:!0,backgroundColor:[185,164,222]},{dominantColor:!1,backgroundColor:[30,0,130]},{dominantColor:!1,backgroundColor:[200,200,130]}],dominantColorCollection=[],globalIndex=0,sketch=function(o){o.index=globalIndex,console.log(o.index),o.collectColors=[],o.img;var r=$(".is-selected img").attr("src"),l="img/L100107"+o.index+".jpg";o.setup=function(){o.noCanvas(),o.img=o.loadImage(l,o.imgAnalyzer)},o.imgAnalyzer=function(){var r=0,l=0,e=0;o.img.loadPixels();for(var n=0;n<o.img.height;n+=100)for(var t=0;t<o.img.height;t+=50){var a=o.img.get(t,n);o.collectColors.push(a)}o.img.updatePixels();for(var c=o.collectColors.length,i=0;i<o.collectColors.length;i++)r+=parseInt(o.collectColors[i][0]),l+=parseInt(o.collectColors[i][1]),e+=parseInt(o.collectColors[i][2]);dominantColorPush([o.floor(r/c),o.floor(l/c),o.floor(e/c)]),console.log(dominantColorCollection)}};$(".carousel-cell__inner img").each(function(o){globalIndex++;var r=String(globalIndex);$(this).attr("data-img-index",r);var l=new p5(sketch)}),backgroundColorSelector(flkty.selectedIndex),progressBarMapper(),flkty.on("select",function(){backgroundColorSelector(flkty.selectedIndex),progressBarMapper()});